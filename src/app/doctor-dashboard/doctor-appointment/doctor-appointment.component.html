<div class="appointments-container">
    <h2>My Appointments</h2>
  
    <div class="loading" *ngIf="isLoading">
      <i class="fas fa-spinner fa-spin"></i> Loading appointments...
    </div>
  
    <div class="appointments-table" *ngIf="appointments.length > 0 && !isLoading; else noAppointments">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Time</th>
            <th>Patient</th>
            <th>Notes</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let appointment of appointments">
            <td>{{ appointment.appointment_date }}</td>
            <td>{{ appointment.appointment_time }}</td>
            <td>
              <div class="patient-info">
                <img *ngIf="appointment.user?.image" [src]="getImageUrl(appointment.user.image)" alt="{{ appointment.user.name }}" class="patient-img" />
                <i *ngIf="!appointment.user?.image" class="fas fa-user-circle patient-icon"></i>
                <span>{{ appointment.user?.name || 'Unknown Patient' }}</span>
              </div>
            </td>
            <td>{{ appointment.notes || 'No notes' }}</td>
            <td>
              <button class="cancel-btn" (click)="cancelAppointment(appointment.id)">Cancel</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <ng-template #noAppointments>
      <div class="no-appointments" *ngIf="!isLoading">
        <i class="fas fa-calendar-times"></i>
        <p>No appointments scheduled.</p>
      </div>
    </ng-template>
  
    <div class="back-section">
      <button class="back-btn" (click)="goBack()">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
      </button>
    </div>
  </div>