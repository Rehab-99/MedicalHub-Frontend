<!-- Patient History Table HTML -->
<section class="patient-history-table-section">
    <div class="history-header">
        <h3>Appointment History</h3>
        <span>Total {{ appointments.length }} Appointments</span>
    </div>

    <div *ngIf="loading" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading appointments...</p>
    </div>

    <table *ngIf="!loading" class="history-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Doctor</th>
                <th>Time</th>
                <th>Status</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let appointment of appointments">
                <td>{{ appointment.appointment_date | date:'dd MMM, yyyy' }}</td>
                <td>{{ appointment.doctor?.name }}</td>
                <td>{{ appointment.appointment_time }}</td>
                <td><span [class]="getStatusClass(appointment.status)">{{ appointment.status }}</span></td>
                <td>{{ appointment.notes || 'No notes' }}</td>
            </tr>
            <tr *ngIf="appointments.length === 0">
                <td colspan="5" class="no-appointments">
                    No appointments found
                </td>
            </tr>
        </tbody>
    </table>
</section> 