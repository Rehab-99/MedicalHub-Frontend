<!-- Shopping Cart -->
<div class="shopping-cart section">
  <div class="container">
    <h2 class="mb-4">Shopping Cart</h2>
    
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <p>Loading cart contents...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="error-state">
      <p>{{ error }}</p>
    </div>
    
    <!-- Empty Cart -->
    <div *ngIf="!isLoading && !error && cartItems.length === 0" class="empty-cart">
      <i class="fas fa-shopping-cart"></i>
      <h3>Your cart is empty</h3>
      <p>You haven't added any products to your cart yet.</p>
      <a routerLink="/products" class="btn">Start Shopping</a>
    </div>

    <!-- Cart Items -->
    <div *ngIf="!isLoading && !error && cartItems.length > 0">
      <div class="cart-list-head">
        <!-- Cart List Title -->
        <div class="cart-list-title">
          <div class="row">
            <div class="col-lg-2 col-md-2 col-12">
              <p>Image</p>
            </div>
            <div class="col-lg-4 col-md-4 col-12">
              <p>Product Name</p>
            </div>
            <div class="col-lg-2 col-md-2 col-12">
              <p>Quantity</p>
            </div>
            <div class="col-lg-2 col-md-2 col-12">
              <p>Price</p>
            </div>
            <div class="col-lg-2 col-md-2 col-12">
              <p>Actions</p>
            </div>
          </div>
        </div>
        <!-- End Cart List Title -->

        <!-- Cart Items List -->
        <div class="cart-single-list" *ngFor="let item of cartItems">
          <div class="row align-items-center">
            <div class="col-lg-2 col-md-2 col-12">
              <img [src]="item.image" [alt]="item.name" class="img-fluid">
            </div>
            <div class="col-lg-4 col-md-4 col-12">
              <h5 class="product-name">{{ item.name }}</h5>
              <p class="product-des">{{ item.description }}</p>
            </div>
            <div class="col-lg-2 col-md-2 col-12">
              <div class="count-input">
                <select class="form-control" [(ngModel)]="item.quantity" (change)="updateQuantity(item.productId, item.quantity)">
                  <option *ngFor="let q of getQuantityOptions(10)" [value]="q">{{ q }}</option>
                </select>
              </div>
            </div>
            <div class="col-lg-2 col-md-2 col-12">
              <p class="price">{{ item.total }} EGP</p>
            </div>
            <div class="col-lg-2 col-md-2 col-12">
              <button (click)="removeItem(item.productId)" class="remove-item">
                <i class="fas fa-trash-alt"></i>
                <span>Remove</span>
              </button>
            </div>
          </div>
        </div>
        <!-- End Cart Items List -->
      </div>

      <div class="row">
        <div class="col-12">
          <!-- Total Amount -->
          <div class="total-amount">
            <div class="row">
              <div class="col-lg-8 col-md-6 col-12">
                <div class="left">
                  <div class="coupon">
                    <form>
                      <input name="Coupon" placeholder="Enter discount code">
                      <div class="button">
                        <button class="btn">Apply Code</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-6 col-12">
                <div class="right">
                  <ul>
                    <li>Total<span>{{ cartTotal }} EGP</span></li>
                    <li>Shipping<span>Free</span></li>
                    <li class="last">Grand Total<span>{{ cartTotal }} EGP</span></li>
                  </ul>
                  <div class="button">
                    <a routerLink="/checkout" class="btn">Checkout</a>
                    <a routerLink="/products" class="btn btn-alt">Continue Shopping</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--/ End Total Amount -->
        </div>
      </div>
    </div>
  </div>
</div>
<!--/ End Shopping Cart -->
