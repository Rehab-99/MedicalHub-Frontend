<!-- Header -->
<app-header></app-header>

<main class="container mx-auto px-4 py-8">
  <!-- Hero Section -->
  <section class="hero-section mb-12">
    <div class="relative h-[500px] rounded-lg overflow-hidden">
      <!-- Hero Slider -->
      <div class="hero-slider w-full h-full">
        <div class="slides-container relative w-full h-full">
          <!-- Slides -->
          <div *ngFor="let slide of heroSlides; let i = index" 
               class="slide absolute w-full h-full transition-opacity duration-500"
               [class.opacity-100]="i === currentHeroSlide"
               [class.opacity-0]="i !== currentHeroSlide">
            <img [src]="slide.image" [alt]="slide.title" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center">
              <div class="text-center text-white">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">{{ slide.title }}</h1>
                <p class="text-xl md:text-2xl">{{ slide.description }}</p>
              </div>
            </div>
          </div>

          <!-- Navigation Arrows -->
          <button class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white p-2 rounded-full bg-black bg-opacity-50 hover:bg-opacity-75 transition-all z-10"
                  (click)="prevHeroSlide()">
            <i class="fas fa-chevron-left text-2xl"></i>
          </button>
          <button class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white p-2 rounded-full bg-black bg-opacity-50 hover:bg-opacity-75 transition-all z-10"
                  (click)="nextHeroSlide()">
            <i class="fas fa-chevron-right text-2xl"></i>
          </button>

          <!-- Dots Navigation -->
          <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10">
            <button *ngFor="let slide of heroSlides; let i = index" 
                    class="w-3 h-3 rounded-full transition-all"
                    [class.bg-white]="i === currentHeroSlide"
                    [class.bg-gray-400]="i !== currentHeroSlide"
                    (click)="goToHeroSlide(i)">
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories Section -->
  <section class="categories-section mb-16">
    <h2 class="text-3xl font-bold mb-8 text-center">Browse by category</h2>
    
    <div class="human-pharmacy-container">
      <div class="header">
        <h1>Human Pharmacy</h1>
        <p>Browse our wide selection of human medications and healthcare products</p>
      </div>

      <div class="categories-section">
        <h2>Categories</h2>
        
        <!-- Loading State -->
        <div *ngIf="loading" class="loading-state">
          <div class="spinner"></div>
          <p>Loading categories...</p>
        </div>

        <!-- Error State -->
        <div *ngIf="error" class="error-state">
          <p>{{ error }}</p>
          <button (click)="loadData()" class="retry-button">Retry</button>
        </div>

        <!-- Categories Grid -->
        <div *ngIf="!loading && !error" class="categories-grid">
          <div *ngFor="let category of categories" 
               class="category-card"
               (click)="onCategoryClick(category.id)">
            <div class="category-image">
              <img [src]="category.image" 
                   [alt]="category.name"
                   (error)="handleImageError($event)"
                   class="category-img">
            </div>
            <div class="category-info">
              <h3>{{ category.name }}</h3>
              <p>{{ category.description }}</p>
            </div>
          </div>
        </div>

        <!-- Empty State -->
        <div *ngIf="!loading && !error && categories.length === 0" class="empty-state">
          <p>No categories available at the moment.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Products Section -->
  <section class="products-section mb-16">
    <h2 class="text-3xl font-bold mb-8 text-center">Featured Products</h2>
    
    <ng-container *ngIf="!loading && !error && featuredProducts.length > 0; else noFeaturedProducts">
      <div class="slider-container">
        <button class="slider-arrow prev" (click)="prevSlide()">
          <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="slider-wrapper">
          <div class="slider-track" [style.transform]="'translateX(' + (-currentSlide * slideWidth) + 'px)'">
            <div class="product-card" *ngFor="let product of featuredProducts">
              <div class="product-image">
                <img [src]="product.image" 
                     [alt]="product.name"
                     (error)="handleImageError($event)"
                     class="w-full h-full object-cover transition-transform duration-300">
              </div>
              <div class="product-info">
                <h3 class="product-name">{{product.name}}</h3>
                <p class="product-description" *ngIf="product.description">{{product.description}}</p>
                <p class="product-price">{{formatPrice(product.price)}}</p>
                <button class="add-to-cart-btn">
                  <i class="fas fa-shopping-cart mr-2"></i>
                  Add to Cart
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <button class="slider-arrow next" (click)="nextSlide()">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
      
      <div class="slider-dots">
        <span 
          *ngFor="let dot of [].constructor(totalSlides); let i = index" 
          class="slider-dot" 
          [class.active]="currentSlide === i"
          (click)="goToSlide(i)">
        </span>
      </div>
    </ng-container>

    <ng-template #noFeaturedProducts>
      <div class="loading-error-container" *ngIf="!loading && !error">
        <div class="no-products">
          <i class="fas fa-box-open"></i>
          <p>No featured products available at the moment.</p>
        </div>
      </div>
    </ng-template>
  </section>
</main>

<!-- Footer -->
<app-footer></app-footer>
